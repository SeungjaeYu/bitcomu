<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
	
<mapper namespace="kr.co.bitcomu.repository.dao.StudyDAO">
	<resultMap type="Study" id="studyMap">
		<result column="study_post_no" property="studyPostNo"/>
		<result column="user_no" property="userNo"/>
		<result column="study_recruit_enabled" property="studyRecruitEnabled"/>
		<result column="study_post_title" property="studyPostTitle"/>
		<result column="study_view_cnt" property="studyViewCnt"/>
		<result column="study_loc" property="studyLoc"/>
		<result column="study_recruit_mem" property="studyRecruitMem"/>
		<result column="study_recruit_field" property="studyRecruitField"/>
		<result column="study_post_content" property="studyPostContent"/>
		<result column="study_reg_dt" property="studyRegDt"/>
	</resultMap>
	
	<sql id="selectStudy">
		select study_post_no, user_no, study_recruit_enabled, study_post_title, study_view_cnt, study_loc, study_recruit_mem, study_recruit_field, study_post_content, study_reg_dt    
			from tb_study
	</sql>
	
	<!-- 스터디게시판 전체목록 조회 -->
	<select id="selectStudyList" resultMap="studyMap">
		<include refid="selectStudy" />
			order by study_post_no desc
	</select>
	
	<!-- 스터디게시판 게시글 조회 -->
	<select id="selectOneStudy" parameterType="int" resultMap="studyMap">
		<include refid="selectStudy" />
			where study_post_no = #{studyPostNo}
	</select>
	
	<!-- 스터디게시판 글 작성 -->
	<insert id="insertStudy" parameterType="Study">
		insert into tb_study (study_post_no, user_no, study_recruit_enabled, study_post_title,  study_loc, study_recruit_mem, 
							study_recruit_field, study_post_content)
				values (tb_study_seq.nextval, #{userNo}, #{studyRecruitEnabled}, #{studyPostTitle},  #{studyLoc}, 
						#{studyRecruitMem}, #{studyRecruitField}, #{studyPostContent})
	</insert>
	
	<!-- 스터디게시판 글 수정 -->
	<update id="updateStudy" parameterType="Study">
		update tb_study 
   			 set study_recruit_enabled = #{studyRecruitEnabled}, 
      			 study_post_title = #{studyPostTitle},
       			 study_loc = #{studyLoc}, 
        		 study_recruit_mem = #{studyRecruitMem}, 
        		 study_recruit_field = #{studyRecruitField}, 
        		 study_post_content = #{studyPostContent},
    where study_post_no = #{study_post_no}
	</update>
	
	<!-- 스터디 게시판 글 삭제 -->
	<delete id="deleteStudy" parameterType="int">
		delete from tb_study
			where study_post_no = #{studyPostNo}
	</delete>
</mapper>